# =============================================================================
# REFITY - Docker Private Registry with SFTP Storage
# Copy this file to .env and fill in your values.
# =============================================================================

# -----------------------------------------------------------------------------
# STORAGE (SFTP) – Backend stores image blobs and manifests on your SFTP server
# -----------------------------------------------------------------------------
# Required. Your SFTP host (e.g. Hetzner Storage Box: u123456.your-storagebox.de)
FTP_HOST=sftp.example.com
# Required. SFTP port (usually 22)
FTP_PORT=22
# Required. SFTP username
FTP_USERNAME=sftpuser
# Required. SFTP password
FTP_PASSWORD=sftppass

# Optional. Path to SSH known_hosts file. Enables host key verification (recommended in production).
# FTP_KNOWN_HOSTS=/etc/refity/known_hosts

# Optional. When to upload to SFTP:
#   false (default) = async: push returns immediately, upload runs in background
#   true             = sync: push waits until file is on SFTP (slower, but file is there when push completes)
# SFTP_SYNC_UPLOAD=false

# -----------------------------------------------------------------------------
# SERVER – Backend HTTP server
# -----------------------------------------------------------------------------
# Optional. Port for the registry API (default: 5000)
# PORT=5000

# -----------------------------------------------------------------------------
# SECURITY & AUTH – Required for production
# -----------------------------------------------------------------------------
# Required in production. Secret for signing JWT tokens. Use a long random string (e.g. 32+ chars).
JWT_SECRET=your-long-random-secret-at-least-32-chars

# Optional. Comma-separated list of allowed CORS origins (e.g. your frontend URL).
# Default: http://localhost:8080, http://127.0.0.1:8080
# CORS_ORIGINS=https://registry.example.com,https://refity.example.com

# -----------------------------------------------------------------------------
# DASHBOARD – FTP Usage card (Hetzner Storage Box)
# -----------------------------------------------------------------------------
# Optional. Show "FTP Usage" card on dashboard (used/total from Hetzner API).
# Default: false (card hidden; dashboard shows only Total Images, Total Groups, Total Size).
# Set to true only if you use Hetzner Storage Box; then set HCLOUD_TOKEN and HETZNER_BOX_ID.
# FTP_USAGE_ENABLED=true

# Required when FTP_USAGE_ENABLED=true. Hetzner Cloud API token (same as HCLOUD token).
# HCLOUD_TOKEN=your_hetzner_api_token_here

# Required when FTP_USAGE_ENABLED=true. Your Hetzner Storage Box numeric ID.
# HETZNER_BOX_ID=0

# -----------------------------------------------------------------------------
# FRONTEND / WEB UI
# -----------------------------------------------------------------------------
# This .env file is loaded by the BACKEND container (see docker-compose.yml `backend.env_file`).
# The production frontend container does NOT read this file.
#
# Production (Docker):
# - The frontend uses same-origin `/api/*` and `/v2/*`.
# - Nginx inside the frontend container proxies those paths to the backend.
# - If you rename your backend service, set this env var on the FRONTEND service:
#     BACKEND_UPSTREAM=backend:5000
#
# Development (local, `npm run dev` inside `frontend/`):
# - The dev server uses VITE_API_URL from `frontend/.env.example`.
#
# Optional (UI only): Registry URL shown for “docker pull” commands.
# If your frontend build uses it, set it at build time or in your CI:
# VITE_REGISTRY_URL=localhost:5000
